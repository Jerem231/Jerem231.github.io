<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0b1220">
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta property="og:url" content="https://www.jeremy-pinchon.com">
    <meta property="description" content="Jérémy PINCHON - Digital 3D Artist specializing in high-end CGI, cinematic visuals, and cutting-edge digital art.">
    <meta property="og:title" content="Jérémy PINCHON - Digital 3D Artist">
    <meta property="og:description" content="Explore the portfolio of Jérémy PINCHON, showcasing high-end CGI, cinematic visuals, and innovative digital art projects.">
    <meta property="keywords" content="Digital 3D Artist, CGI, Cinematic Visuals, Digital Art, Portfolio, Jérémy PINCHON">
    <meta property="author" content="Jérémy PINCHON">

    <meta name="google-site-verification" content="6Q6zrvlePzRbAi5mg9w_IDUed3SarR9gppW6Y6BYgS0" />

    <link rel="preconnect" href="https://ka-f.fontawesome.com" crossorigin>
    <link rel="preload" href="https://kit.fontawesome.com/ebd4e3dd01.js" as="script">
    <script src="https://kit.fontawesome.com/ebd4e3dd01.js" crossorigin="anonymous"></script>

    <link rel="preconnect" href="https://ka-f.fontawesome.com" crossorigin>
    <link rel="preload" href="https://kit.fontawesome.com/ebd4e3dd01.js" as="script">
    <script src="https://kit.fontawesome.com/ebd4e3dd01.js" crossorigin="anonymous"></script>

    <title>Jérémy PINCHON</title>

    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="toolbox.bundle.js"></script>
</head>

<body>
    <section id="home">
        <div class="text">
            <div class="title" data-parallax="100">
                <h2>Jérémy PINCHON</h2>
                <h1 class="h1-fx gradient">Digital 3D Artist</h1>
            </div>
            <p>High-end CGI, cinematic visuals and cutting edge digital art</p>
        </div>

        <div class="background-effect">
            <canvas id="starfield"></canvas>

            <div class="parallax-layer layer-glow" data-parallax="-300"></div>
        </div>

    </section>

    <section id="featured-projects">
        <div class="block identity">
            <h3>01 IDENTITY</h3>
        </div>
        <div class="block modeling">
            <h3>02 MODELING</h3>
        </div>
        <div class="block compositing">
            <h3>03 COMPOSITING</h3>
        </div>

    </section>

    <section id="contact">
        <div id="viewer" style="width:100%;height:520px;border-radius:16px;overflow:hidden;"></div>

        <div id="viewer" style="width:100%;height:520px;border-radius:16px;overflow:hidden;"></div>

        <h2>Contact Me</h2>
        <div class="contact-block">
            <a href="https://www.linkedin.com/in/j%C3%A9r%C3%A9my-pinchon-81a0b8304/" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-linkedin"></i> Linkedin
            </a>

            <a href="/JEREMY_PINCHON.pdf" download><i class="fas fa-file-download"></i>Download CV</a>
            
        </div>
        <div class="contact-block">
            <a href="https://www.linkedin.com/in/j%C3%A9r%C3%A9my-pinchon-81a0b8304/" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-linkedin"></i> Linkedin
            </a>

            <a href="/JEREMY_PINCHON.pdf" download><i class="fas fa-file-download"></i>Download CV</a>
            
        </div>
        <form action="https://api.web3forms.com/submit" method="POST" data-parallax="20">
            <input type="hidden" name="access_key" value="b830084b-fce3-4076-a6ef-19b82c4262c8">

            <label for="name">Name</label>
            <input type="text" name="name" required placeholder="Your Name">

            <label for="email">Email</label>
            <input type="email" name="email" required placeholder="your.email@example.com">

            <label for="message">Message</label>
            <textarea name="message" required placeholder="Your Message..."></textarea>
            <button type="submit">Submit</button>
        </form>
    </section>

    <!-- cursor -->
    <div class="custom-cursor" aria-hidden="true">
        <div class="cursor-ring"></div>
        <div class="cursor-dot"></div>
    </div>

    <!-- slides -->
    <template id="slide-1">
        <div class="slide" data-project="project-1">Slide 1</div>
    </template>
    <template id="project-1">
        <div class="project">
            <h2>Project 1</h2>
            <p>Details about Project 1...</p>
        </div>
    </template>

    <template id="slide-2">
        <div class="slide" data-project="project-2">Slide 2</div>
    </template>
    <template id="project-2">
        <div class="project">
            <h2>Project 2</h2>
            <p>Details about Project 2...</p>
        </div>
    </template>

    <template id="slide-3">
        <div class="slide" data-project="project-3">Slide 3</div>
    </template>
    <template id="project-3">
        <div class="project">
            <h2>Project 3</h2>
            <p>Details about Project 3...</p>
        </div>
    </template>
</body>

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/examples/": "https://unpkg.com/three@0.160.0/examples/"
  }
}
</script>
<script type="module" src="/js/viewer.js"></script>


<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "three/examples/": "https://unpkg.com/three@0.160.0/examples/"
  }
}
</script>
<script type="module" src="/js/viewer.js"></script>

<script>
    const { PopUp, Navigator, ContextMenu, EditableText, DataTable, Toast, LoadingScreen, Slider } = Toolbox;

    const MOBILE_VIEWPORT_WIDTH = 560;
    var isMobile = window.innerWidth <= MOBILE_VIEWPORT_WIDTH;
    
    const MOBILE_AUTO_OVER_THRESHOLD = 0.25; // seuil (% of vh) pour "auto hover" en mobile

    const DEBOUNCE_MS = 150; // refresh rate for resize events
    let _resizeTimeout = null;
    function _handleResizeFinal() {
        resize();
        onScroll();

        isMobile = window.innerWidth <= MOBILE_VIEWPORT_WIDTH;

        STAR_COUNT = isMobile ? 100 : 400;
        stars = Array.from({ length: STAR_COUNT }, () => new Star());
        animate();
    }

    window.addEventListener('resize', () => {
        if (_resizeTimeout) clearTimeout(_resizeTimeout);
        _resizeTimeout = setTimeout(_handleResizeFinal, DEBOUNCE_MS);
    });

    const canvas = document.getElementById("starfield");
    const ctx = canvas.getContext("2d");

    let w, h;
    let stars = [];
    let STAR_COUNT = isMobile ? 100 : 400;
    const mouse = { x: 0, y: 0 };

    function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    class Star {
        constructor() {
            this.reset();
        }

        reset() {
            this.x = Math.random() * w;
            this.y = Math.random() * h;
            this.z = Math.random();
            this.r = 1.5 + this.z * 1.5;
            this.vx = 0;
            this.vy = 0;
        }

        update() {
            const dx = (this.x - mouse.x) * 2;
            const dy = (this.y - mouse.y) * 2;
            const dist = Math.sqrt(dx * dx + dy * dy) || 1;

            const force = Math.min(80 / dist, 2);
            this.vx += (dx / dist) * force * this.z;
            this.vy += (dy / dist) * force * this.z;

            this.x += this.vx;
            this.y += this.vy;

            this.vx *= 0.92;
            this.vy *= 0.92;

            if (
                this.x < -50 || this.x > w + 50 ||
                this.y < -50 || this.y > h + 50
            ) {
                this.reset();
            }
        }

        draw() {
            const t = this.z;
            const g = ctx.createRadialGradient(
                this.x, this.y, 0,
                this.x, this.y, this.r * 4
            );

            g.addColorStop(0, `rgba(200,220,255,${0.7 * t})`);
            g.addColorStop(0.5, `rgba(120,160,255,${0.3 * t})`);
            g.addColorStop(1, `rgba(0,0,0,0)`);

            ctx.fillStyle = g;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    stars = Array.from({ length: STAR_COUNT }, () => new Star());

    window.addEventListener("mousemove", e => {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
    });

    let stars_animation_frame = null;

    function animate() {
        if (stars_animation_frame) {
            cancelAnimationFrame(stars_animation_frame);
        }
        
        ctx.clearRect(0, 0, w, h);

        for (const star of stars) {
            star.update();
            star.draw();
        }

        stars_animation_frame = requestAnimationFrame(animate);
    }

    animate();

    const root = document.querySelector(".custom-cursor");
    const dot = document.querySelector(".cursor-dot");
    const ring = document.querySelector(".cursor-ring");
    
    let mx = window.innerWidth / 2, my = window.innerHeight / 2;
    let rx = mx, ry = my;
    
    const isFinePointer = matchMedia("(hover: hover) and (pointer: fine)").matches;
    if (!isFinePointer) root.style.display = "none";
    
    window.addEventListener("mousemove", (e) => {
        mx = e.clientX;
        my = e.clientY;
        dot.style.transform = `translate(${mx}px, ${my}px) translate(-50%, -50%)`;
    });
    
    // met à jour l'état "active" du curseur en fonction de l'élément sous le pointeur
    const hoverables = "a, button, [role='button'], .hoverable, .slide";
    function updateCursorActiveState() {
        const el = document.elementFromPoint(mx, my);
        if (el && el.closest(hoverables)) root.classList.add("cursor--active");
        else root.classList.remove("cursor--active");
    }

    // polling fallback : si la classe active est présente on vérifie périodiquement
    let _activePollInterval = null;
    const ACTIVE_POLL_MS = 120; // fréquence du check quand actif

    function startActivePolling() {
        if (_activePollInterval) return;
        _activePollInterval = setInterval(() => {
            updateCursorActiveState();
            // stop automatique si plus actif
            if (!root.classList.contains("cursor--active")) stopActivePolling();
        }, ACTIVE_POLL_MS);
    }
    function stopActivePolling() {
        if (!_activePollInterval) return;
        clearInterval(_activePollInterval);
        _activePollInterval = null;
    }

    // déclencher polling quand on devient actif (capture mouseover/move aussi)
    const _oldAddActive = () => root.classList.add("cursor--active");
    document.addEventListener("mouseover", (e) => {
      if (e.target.closest(hoverables)) { _oldAddActive(); startActivePolling(); }
    });
    document.addEventListener("mouseout", (e) => {
      if (e.target.closest(hoverables)) { root.classList.remove("cursor--active"); stopActivePolling(); }
    });


    // fallback : si un handler empêche mouseout (ex: preventDefault sur close), on force un check
    document.addEventListener('click', (e) => {
        if (e.target.closest('.popup-close, .close, [data-popup-close]')) {
            // donner le temps au DOM puis vérifier plusieurs fois si nécessaire
            updateCursorActiveState();
            startActivePolling();
            setTimeout(() => { updateCursorActiveState(); stopActivePolling(); }, 300);
        }
    }, true);


    // si on ouvre un popup via open_project depuis notre handler, on force aussi la recompute
    // (si tu as un autre endroit qui appelle open_project, adapte aussi)
    function open_project_and_sync(id) {
        open_project(id);
        // small delay to allow popup to render and for pointer state to settle
        setTimeout(updateCursorActiveState, 50);
    }
    function tick() {
    // inertie du ring (plus faible = plus “lourd”)
    rx += (mx - rx) * 0.12;
    ry += (my - ry) * 0.12;
    ring.style.transform = `translate(${rx}px, ${ry}px) translate(-50%, -50%)`;
    requestAnimationFrame(tick);
    }
    tick();

    // Active sur éléments interactifs
    document.addEventListener("mouseover", (e) => {
    if (e.target.closest(hoverables)) root.classList.add("cursor--active");
    });
    document.addEventListener("mouseout", (e) => {
    if (e.target.closest(hoverables)) root.classList.remove("cursor--active");
    });

    function generate_slider() {
        const slides = [
            document.getElementById('slide-1').content.cloneNode(true),
            document.getElementById('slide-2').content.cloneNode(true),
            document.getElementById('slide-3').content.cloneNode(true),
        ];

        const slider = new Slider({
            slides,
            start_index: 0,
            loop: false,
            arrows: true,
            dots: false,
            autoplay_ms: 0,
            pause_on_hover: false,
            keyboard: true,
            swipe: true,
            // on_change: (i) => console.log('slide ->', i),
            slides_per_view: 3,
        });

        slider.append_to(document.querySelector('#slider-mount'));
        slider.go_to(1);
        slider.go_to(0);
    }

    generate_slider();

    // robust open handler: pointer / touch / click fallback
    (function(){
        const sliderMount = document.querySelector('#slider-mount');
        if (!sliderMount) return;

        let _lastOpenTs = 0;
        function handleProjectOpenAtPoint(x, y, e) {
            const el = document.elementFromPoint(x, y);
            if (!el) return false;
            const s = el.closest('.slide');
            if (!s) return false;
            const id = s.dataset.project;
            if (!id) return false;
            const now = Date.now();
            if (now - _lastOpenTs < 500) return true; // debounce
            _lastOpenTs = now;
            if (e && typeof e.preventDefault === 'function') {
                try { e.preventDefault(); e.stopPropagation(); } catch (err) {}
            }
            open_project(id);
            return true;
        }

        // Pointer events (principal)
        if (window.PointerEvent) {
            sliderMount.addEventListener('pointerup', (e) => {
                // ignore mouse moves that aren't clicks if desired: only act on touch or pen or mouse
                handleProjectOpenAtPoint(e.clientX, e.clientY, e);
            }, { passive: false });
        } else {
            // touch fallback
            sliderMount.addEventListener('touchend', (e) => {
                const t = e.changedTouches && e.changedTouches[0];
                if (!t) return;
                handleProjectOpenAtPoint(t.clientX, t.clientY, e);
            }, { passive: false });
            // click fallback (capture to try to run before other bubble handlers)
            sliderMount.addEventListener('click', (e) => {
                const s = e.target.closest('.slide');
                if (!s) return;
                const id = s.dataset.project;
                if (!id) return;
                if (Date.now() - _lastOpenTs < 500) return;
                _lastOpenTs = Date.now();
                e.preventDefault(); e.stopPropagation();
                open_project(id);
            }, true);
        }
    })();

    const items = [...document.querySelectorAll('[data-parallax]')];

    function onScroll(){
        const vh = innerHeight;
        for (const el of items) {
            const r = el.getBoundingClientRect();
            const mid = (r.top + r.bottom) / 2;
            const t = (mid - vh/2) / vh;           // -1..1 approx
            const s = parseFloat(el.dataset.parallax || "20"); // px
            if (isMobile) {
                // delete parallax effect on mobile
                el.style.transform = `translateY(0px)`;
                continue;
            }
            el.style.transform = `translateY(${t * s}px)`;
        }

        // en mobile : quand le h1 arrive dans la partie supérieure du viewport, lui ajouter une classe
        if (isMobile) {
            document.querySelectorAll('.h1-fx').forEach(h => {
                const r = h.getBoundingClientRect();
                if (r.top <= vh * MOBILE_AUTO_OVER_THRESHOLD) h.classList.add('auto-over');
                else h.classList.remove('auto-over');
            });
        } else {
            // s'assurer de retirer la classe si on repasse en desktop
            document.querySelectorAll('.h1-fx.auto-over').forEach(h => h.classList.remove('auto-over'));
        }
    }
    addEventListener('scroll', onScroll, { passive:true });
    onScroll();

    document.querySelectorAll('.h1-fx').forEach(el => {
        const text = el.textContent;
        el.textContent = '';
        [...text].forEach((c, i) => {
            const s = document.createElement('span');
            s.className = 'ch';
            s.style.setProperty('--i', i);
            s.textContent = c === ' ' ? '\u00A0' : c;
            el.appendChild(s);
        });
    });

    function open_project(project_id) {
        const template = document.getElementById(project_id);
        if (!template) Toast.info("No more information available for this project.");
        else {
            const content = template.content.cloneNode(true);
            new PopUp({
                content: content,
                buttons: [{ label: 'Close', class_name: 'yes-button' }]
            }).open();
        }
    }

</script>

</html>